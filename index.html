<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>360Â° Architectural Tour</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pannellum/2.5.6/pannellum.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pannellum/2.5.6/pannellum.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            overflow: hidden;
            background: #000;
        }

        #panorama {
            width: 100vw;
            height: 100vh;
        }

        /* Welcome Page */
        .welcome-page {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: 3000;
            display: flex;
            flex-direction: column;
            background-size: cover;
            background-position: center;
            background-image: url('welcome-bg.png');
        }

        .welcome-page::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.4);
            z-index: -1;
        }

        .welcome-logo {
            position: absolute;
            top: 30px;
            left: 30px;
            background: rgba(0, 0, 0, 0.7);
            padding: 20px 25px;
            border-radius: 12px;
            backdrop-filter: blur(10px);
            z-index: 10;
        }

        .welcome-logo img {
            height: 60px;
            width: auto;
            display: block;
        }

        .welcome-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 40px 40px 100px 40px;
            text-align: center;
            position: relative;
            z-index: 2;
        }

        .welcome-title {
            font-size: 36px;
            font-weight: 600;
            color: white;
            margin-bottom: 30px;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
        }

        .welcome-instructions {
            max-width: 700px;
            width: 100%;
            margin-bottom: 40px;
        }

        .instruction-box {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            padding: 30px;
            border-radius: 16px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            text-align: left;
        }

        .instruction-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .instruction-list li {
            font-size: 16px;
            line-height: 1.8;
            margin-bottom: 12px;
            padding-left: 35px;
            position: relative;
        }

        .instruction-list li:last-child {
            margin-bottom: 0;
        }

        .instruction-list li::before {
            content: attr(data-icon);
            position: absolute;
            left: 0;
            font-size: 20px;
        }

        .start-tour-btn {
            padding: 22px 60px;
            background: #003314;
            border: none;
            border-radius: 35px;
            color: white;
            font-size: 20px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 6px 25px rgba(0, 51, 20, 0.5);
        }

        .start-tour-btn:hover {
            background: #004d1f;
            transform: translateY(-3px);
            box-shadow: 0 8px 30px rgba(0, 51, 20, 0.7);
        }

        /* Logo Container - Darker Background */
        .logo-container {
            position: absolute;
            top: 20px;
            left: 20px;
            z-index: 1000;
            background: rgba(0, 0, 0, 0.75);
            padding: 15px 20px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
        }

        .logo-img {
            height: 50px;
            width: auto;
            display: block;
        }

        /* Audio Control Button - Top Right */
        .audio-control {
            position: absolute;
            top: 20px;
            right: 20px;
            z-index: 1000;
            background: rgba(0, 0, 0, 0.75);
            padding: 15px;
            border-radius: 50%;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
            cursor: pointer;
            transition: all 0.3s ease;
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .audio-control:hover {
            background: rgba(0, 0, 0, 0.85);
            transform: scale(1.05);
        }

        .audio-icon {
            font-size: 28px;
            line-height: 1;
        }

        /* Annotations Panel - Collapsible */
        .annotations {
            position: absolute;
            bottom: 80px;
            left: 20px;
            max-width: 350px;
            background: rgba(255, 255, 255, 0.25);
            backdrop-filter: blur(15px);
            padding: 15px 20px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            z-index: 1000;
            transition: all 0.3s ease;
        }

        .annotations.minimized {
            padding: 12px 16px;
        }

        .annotations.minimized .annotation-content {
            display: none;
        }

        .annotation-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .annotations.minimized .annotation-header {
            margin-bottom: 0;
        }

        .annotations h3 {
            font-size: 16px;
            font-weight: 600;
            color: #1a1a1a;
            border-bottom: 2px solid #003314;
            padding-bottom: 8px;
            margin: 0;
            flex: 1;
        }

        .annotations.minimized h3 {
            border-bottom: none;
            padding-bottom: 0;
        }

        .toggle-btn {
            background: #003314;
            color: white;
            border: none;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            font-size: 18px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
            margin-left: 10px;
            flex-shrink: 0;
        }

        .toggle-btn:hover {
            background: #004d1f;
            transform: scale(1.1);
        }

        .annotation-content {
            display: block;
        }

        .annotation-item {
            margin-bottom: 10px;
            font-size: 14px;
            color: #1a1a1a;
            line-height: 1.5;
        }

        .annotation-item:last-child {
            margin-bottom: 0;
        }

        .annotation-bullet {
            color: #003314;
            font-weight: bold;
            margin-right: 6px;
        }

        /* Scene Navigation - Glass Effect */
        .scene-nav {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 12px;
            z-index: 1000;
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(20px);
            padding: 12px 18px;
            border-radius: 25px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .scene-btn {
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 18px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            color: #1a1a1a;
            transition: all 0.3s ease;
            white-space: nowrap;
            backdrop-filter: blur(10px);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .scene-btn:hover {
            background: rgba(255, 255, 255, 0.35);
            border-color: rgba(0, 51, 20, 0.5);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }

        .scene-btn.active {
            background: rgba(0, 51, 20, 0.85);
            border-color: #003314;
            color: white;
            box-shadow: 0 4px 16px rgba(0, 51, 20, 0.3);
        }

        .hidden {
            display: none;
        }

        /* Mobile optimizations */
        @media (max-width: 768px) {
            .welcome-logo {
                top: 20px;
                left: 20px;
                padding: 15px 20px;
            }

            .welcome-logo img {
                height: 45px;
            }

            .welcome-content {
                padding: 140px 20px 120px 20px;
                justify-content: flex-start;
            }

            .welcome-title {
                font-size: 26px;
                margin-bottom: 20px;
            }

            .welcome-instructions {
                margin-bottom: 30px;
            }

            .instruction-box {
                padding: 20px;
            }

            .instruction-list li {
                font-size: 14px;
                line-height: 1.6;
                margin-bottom: 10px;
                padding-left: 30px;
            }

            .instruction-list li::before {
                font-size: 18px;
            }

            .start-tour-btn {
                padding: 18px 45px;
                font-size: 18px;
                margin-bottom: 20px;
            }

            .logo-container {
                top: 15px;
                left: 15px;
                padding: 12px 16px;
            }

            .logo-img {
                height: 40px;
            }

            .audio-control {
                top: 15px;
                right: 15px;
                width: 50px;
                height: 50px;
                padding: 12px;
            }

            .audio-icon {
                font-size: 24px;
            }

            .annotations {
                bottom: 70px;
                left: 15px;
                right: 15px;
                max-width: none;
                padding: 12px 16px;
            }

            .annotations h3 {
                font-size: 14px;
            }

            .annotation-item {
                font-size: 13px;
            }

            .scene-nav {
                bottom: 15px;
                padding: 10px 15px;
                gap: 8px;
                max-width: calc(100% - 30px);
            }

            .scene-btn {
                padding: 10px 18px;
                font-size: 13px;
                flex: 1;
            }
        }
    </style>
</head>
<body>
    <!-- Welcome Page -->
    <div class="welcome-page" id="welcomePage">
        <div class="welcome-logo">
            <img src="logo.png" alt="The Shereen and Laura Company">
        </div>
        
        <div class="welcome-content">
            <h1 class="welcome-title">Welcome to the Tour</h1>
            
            <div class="welcome-instructions">
                <div class="instruction-box">
                    <ul class="instruction-list">
                        <li data-icon="ðŸ“±">On mobile: Move your phone to look around</li>
                        <li data-icon="ðŸ–±ï¸">On desktop: Click and drag to explore</li>
                        <li data-icon="ðŸ‘†">Tap buttons below to switch views</li>
                    </ul>
                </div>
            </div>
            
            <button class="start-tour-btn" onclick="startTour()">Start Exploring</button>
        </div>
    </div>

    <!-- Logo -->
    <div class="logo-container">
        <img src="logo.png" alt="The Shereen and Laura Company" class="logo-img">
    </div>

    <!-- Audio Control Button -->
    <div class="audio-control" id="audioControl" onclick="toggleAudio()" title="Toggle Audio">
        <span class="audio-icon" id="audioIcon">ðŸ”Š</span>
    </div>

    <!-- Panorama Container -->
    <div id="panorama"></div>

    <!-- Annotations -->
    <div class="annotations" id="annotations">
        <div class="annotation-header">
            <h3 id="scene-title">Entrance</h3>
            <button class="toggle-btn" id="toggleBtn" onclick="toggleAnnotations()">âˆ’</button>
        </div>
        <div class="annotation-content" id="annotation-content">
            <div class="annotation-item">
                <span class="annotation-bullet">â€¢</span>
                Natural light floods through the glazed entrance
            </div>
            <div class="annotation-item">
                <span class="annotation-bullet">â€¢</span>
                Double-height ceiling creates sense of arrival
            </div>
            <div class="annotation-item">
                <span class="annotation-bullet">â€¢</span>
                Material palette: concrete, timber, glass
            </div>
        </div>
    </div>

    <!-- Scene Navigation -->
    <div class="scene-nav">
        <button class="scene-btn active" onclick="loadScene('entrance')">Entrance</button>
        <button class="scene-btn" onclick="loadScene('spa')">Spa</button>
        <button class="scene-btn" onclick="loadScene('rooms')">Rooms</button>
    </div>

    <script>
        // Scene configuration with annotations and audio
        const scenes = {
            entrance: {
                title: "Entrance",
                image: "entrance.png",
                audio: "entrance-audio.mp3",
                annotations: [
                    "Natural light floods through the glazed entrance",
                    "Double-height ceiling creates sense of arrival",
                    "Material palette: concrete, timber, glass"
                ]
            },
            spa: {
                title: "Spa",
                image: "spa.png",
                audio: "spa-audio.mp3",
                annotations: [
                    "Grounded design and connected to nature through an auditory experience",
                    "Warm rammed earth walls enclosing the space",
                    "A play with light create organic shadows that mimic the shadows created by crown canopies"
                ]
            },
            rooms: {
                title: "Rooms",
                image: "rooms.png",
                audio: "rooms-audio.mp3",
                annotations: [
                    "Seamless integration with landscape",
                    "Overhanging roof provides shade and shelter",
                    "Native planting softens the built form"
                ]
            }
        };

        let viewer;
        let currentScene = 'entrance';
        let currentAudio = null;
        let isMuted = false;

        // Start tour - hide welcome page
        function startTour() {
            document.getElementById('welcomePage').classList.add('hidden');
            initViewer();
            playAudio(currentScene);
        }

        // Initialize viewer
        function initViewer() {
            viewer = pannellum.viewer('panorama', {
                type: "equirectangular",
                panorama: scenes[currentScene].image,
                autoLoad: true,
                showControls: false,
                compass: false,
                orientationOnByDefault: true,
                draggable: true,
                mouseZoom: true,
                doubleClickZoom: false,
                friction: 0.15,
                hfov: 100,
                pitch: 0,
                yaw: 0
            });
        }

        // Play audio for a scene
        function playAudio(sceneId) {
            // Stop current audio if playing
            if (currentAudio) {
                currentAudio.pause();
                currentAudio.currentTime = 0;
            }

            // Create new audio element
            if (!isMuted && scenes[sceneId].audio) {
                currentAudio = new Audio(scenes[sceneId].audio);
                currentAudio.loop = true;
                currentAudio.volume = 0.7;
                
                // Play audio
                currentAudio.play().catch(error => {
                    console.log('Audio playback failed:', error);
                });
            }
        }

        // Toggle audio mute/unmute
        function toggleAudio() {
            isMuted = !isMuted;
            const audioIcon = document.getElementById('audioIcon');
            
            if (isMuted) {
                audioIcon.textContent = 'ðŸ”‡';
                if (currentAudio) {
                    currentAudio.pause();
                }
            } else {
                audioIcon.textContent = 'ðŸ”Š';
                playAudio(currentScene);
            }
        }

        // Toggle annotations panel
        function toggleAnnotations() {
            const annotations = document.getElementById('annotations');
            const toggleBtn = document.getElementById('toggleBtn');
            
            if (annotations.classList.contains('minimized')) {
                annotations.classList.remove('minimized');
                toggleBtn.textContent = 'âˆ’';
            } else {
                annotations.classList.add('minimized');
                toggleBtn.textContent = '+';
            }
        }

        // Load a different scene
        function loadScene(sceneId) {
            currentScene = sceneId;
            
            // Update active button
            document.querySelectorAll('.scene-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');

            // Destroy existing viewer and create new one with new panorama
            if (viewer) {
                viewer.destroy();
            }
            
            viewer = pannellum.viewer('panorama', {
                type: "equirectangular",
                panorama: scenes[sceneId].image,
                autoLoad: true,
                showControls: false,
                compass: false,
                orientationOnByDefault: true,
                draggable: true,
                mouseZoom: true,
                doubleClickZoom: false,
                friction: 0.15,
                hfov: 100,
                pitch: 0,
                yaw: 0
            });

            // Play audio for new scene
            playAudio(sceneId);

            // Update annotations
            updateAnnotations(sceneId);
        }

        // Update annotations panel
        function updateAnnotations(sceneId) {
            const scene = scenes[sceneId];
            document.getElementById('scene-title').textContent = scene.title;
            
            const annotationContent = document.getElementById('annotation-content');
            annotationContent.innerHTML = scene.annotations.map(text => 
                `<div class="annotation-item">
                    <span class="annotation-bullet">â€¢</span>${text}
                </div>`
            ).join('');
        }
    </script>
</body>
</html>
